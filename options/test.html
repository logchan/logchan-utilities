<!doctype html>
<html>
<head>
    <meta encoding="utf-8">
    <title>logchan Utilities TEST</title>
    <style>
    body {
        max-width: 1000px;
        margin: auto;
    }
    </style>
</head>
<body>
  <a href="javascript:" onclick="test1()">TEST 1</a>
  <div id="log"></div>
  <script>
    function log(s) {
      const p = document.createElement("p")
      p.appendChild(document.createTextNode(s))
      document.querySelector("#log").appendChild(p)
    }
    function test1() {
      chrome.history.search( { 
          text: "", 
          maxResults: 65536,
          startTime: 0
      }, results => {
        let min = 1e20
        let max = 0
        results.forEach(r => {
          min = Math.min(min, r.lastVisitTime)
          max = Math.max(max, r.lastVisitTime)
        })
        const count = results.length
        const first = new Date(results[0].lastVisitTime)
        const last  = new Date(results[count - 1].lastVisitTime)
        log(`found ${count} results`)
        log(`${new Date(min)} - ${new Date(max)}`)
        log(`first: ${first}`)
        log(`last: ${last}`)
      })
    }
  </script>
</body>
</html>